<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Track Test</title>

  
  <script src="./gl-matrix-min.js"></script>
  
  <script src="./Bezier.js"></script>
  <script src="./Interpolation.js"></script>
  <script src="./Frame.js"></script>
  <script src="./Track.js"></script>
</head>
<body>
<canvas id="mycanvas" width="640" height="480"></canvas>

<script>
var canvas = document.getElementById("mycanvas");
var ctx = canvas.getContext("2d");

function DrawPoint(x, y, color, pointSize) {
  ctx.fillStyle = color;
  ctx.fillRect(x, y, pointSize, pointSize);
}
function DrawLine(x1, y1, x2, y2, color) {
  ctx.strokeStyle = color;
  ctx.moveTo(x1, y1);
  ctx.lineTo(x2, y2);
  ctx.stroke();
}

/**
  @brief linear interpolate floats a and b based on t
  @return interpolated float
*/
function LerpFloat(a, b, t) {
  return a + (b-a)*t;
}

var scalarTracks = [];
scalarTracks.push(
  new Vec3Track(
    [
      new Vec3Frame(
        [10.0, 10.0, 0.0], // value; x/y = start pixel position
        [0.0, 0.0, 0.0], // in
        [0.0, 0.0, 0.0], // out
        0.0 // time
      ),
      new Vec3Frame(
        [300.0, 300.0, 0.0], // value
        [0.0, 0.0, 0.0], // in
        [0.0, 0.0, 0.0], // out
        1.0 // time
      )
    ], 
    Interpolation.Linear
  )
);
for (var j = 1; j < 150; ++j) {
    var thisJNorm = (j-1) / 149.0;
    var nextJNorm = j / 149.0;

    var thisSample = scalarTracks[0].Sample(thisJNorm, true); // looping = true
    var nextSample = scalarTracks[0].Sample(nextJNorm, true);
    DrawLine(
      thisSample[0],
      thisSample[1],
      nextSample[0],
      nextSample[1],
      "#FF0000"
    );
}

</script>

</body>
</html>

